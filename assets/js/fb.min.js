function statusChangeCallback(t){console.log(t),"connected"!==t.status&&ajax_check_form(t),afterLogin(t)}function checkLoginState(){FB.getLoginStatus(function(t){statusChangeCallback(t)})}function afterLogin(t){"connected"===t.status&&FB.api("/me?fields=id,first_name,last_name,email",function(e){e.status=t.status,ajax_check_form(e)})}function ajax_check_form(t){$.ajax({url:"check_user_login",type:"post",data:t,dataType:"json",success:function(t){t.reload&&window.location.reload(!0)},error:function(t){alert("Lỗi! Vui lòng thử lại.")}})}function checkPermissionEmail(){FB.api("/me/permissions",function(t){for(i=0;i<t.data.length;i++)"email"==t.data[i].permission&&"declined"==t.data[i].status&&!1})}function shareFacebook(t){FB.ui({method:"share",mobile_iframe:!0,href:t.attr("data-href")},function(t){t&&!t.error_code&&$.ajax({url:"processAfterShare",type:"post",dataType:"json",success:function(t){t.spin&&(alert(t.msg),$("#num-spin .num").html(t.spin))},error:function(t){alert("Lỗi! Vui lòng thử lại.")}})})}var appId="430365350743795";window.fbAsyncInit=function(){FB.init({appId:appId,xfbml:!0,version:"v3.0"}),FB.AppEvents.logPageView(),FB.getLoginStatus(function(t){statusChangeCallback(t)}),FB.Event.subscribe("auth.login",function(t){afterLogin(t)})},function(t,e,n){var a,i=t.getElementsByTagName(e)[0];t.getElementById(n)||((a=t.createElement(e)).id=n,a.src="https://connect.facebook.net/vi_VN/sdk.js#xfbml=1&version=v3.0&appId="+appId+"&autoLogAppEvents=1",i.parentNode.insertBefore(a,i))}(document,"script","facebook-jssdk");